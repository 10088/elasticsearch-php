    /**
{% for key, arg in docBlockArgsRequired %}
     * {{ loop.first ? '$params' : '       ' }}['{{ key }}']{{ arg.pad }} = ({{ arg.type }}) {{ arg.description|raw }} (Required)
{% endfor %}
{% for key, arg in docBlockArgsNotRequired %}
     * {{ loop.first and docBlockArgsRequired|length == 0 ? '$params' : '       ' }}['{{ key }}']{{ arg.pad }} = ({{ arg.type }}) {{ arg.description|raw }}
{% endfor %}
     *
{% if allArgs|length > 0 %}
     * @param $params array Associative array of parameters
{% endif  %}
     *
     * @return array
     */
    public function {{ functionName }}({% if allArgs|length > 0 %}$params{% if docBlockArgsRequired|length == 0 %} = array(){% endif %}{% endif %})
    {
{% for arg in extractList %}
        ${{ arg }} = $this->extractArgument($params, '{{ arg }}');
        unset($params['{{ arg }}']);

{% endfor %}

        /** @var callback $endpointBuilder */
        $endpointBuilder = $this->dicEndpoints;

        /** @var \Elasticsearch\Endpoints\{{ namespace }} $endpoint */
        $endpoint = $endpointBuilder('{{ namespace }}');
{% for arg in extractList %}
        {{ loop.first ? '$endpoint' : '         ' }}->set{{ arg|title }}(${{ arg }}){{ loop.last ? ';' }}
{% endfor %}
{% if allArgs|length > 0 %}
        $endpoint->setParams($params);
{% endif %}
        return $endpoint->performRequest();
    }
